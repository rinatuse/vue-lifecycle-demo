<template>
    <div class="brackets-validator">
      <h1>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Å–∫–æ–±–æ–∫</h1>
      
      <div class="problem-container">
        <h2>–ó–∞–¥–∞—á–∞:</h2>
        <div class="problem-statement">
          <p>–ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é <code>checkBrackets(str)</code>, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–æ–∫—É, —Å–æ–¥–µ—Ä–∂–∞—â—É—é —Å–∫–æ–±–∫–∏ —Ç—Ä–µ—Ö –≤–∏–¥–æ–≤: <code>()</code>, <code>{}</code>, <code>[]</code>. 
             –§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å <code>true</code>, –µ—Å–ª–∏ —Å–∫–æ–±–∫–∏ –≤ —Å—Ç—Ä–æ–∫–µ –∑–∞–∫—Ä—ã—Ç—ã –∏ –≤–ª–æ–∂–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –∏ <code>false</code> –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ.</p>
        </div>
        
        <div class="examples">
          <h3>–ü—Ä–∏–º–µ—Ä—ã:</h3>
          <div class="example" v-for="(example, index) in examples" :key="index">
            <div class="example-input">checkBrackets("<span v-html="highlightBrackets(example.input)"></span>")</div>
            <div class="example-output">‚Üí {{ example.output }}</div>
            <div class="example-explanation" v-if="example.explanation">{{ example.explanation }}</div>
          </div>
        </div>
      </div>
      
      <div class="algorithm-explanation">
        <h2>–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–µ—à–µ–Ω–∏—è:</h2>
        <p>–î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö <strong>—Å—Ç–µ–∫</strong>, –∫–æ—Ç–æ—Ä–∞—è –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Å–∫–æ–±–æ–∫.</p>
        
        <div class="algorithm-steps">
          <div class="step">
            <div class="step-number">1</div>
            <div class="step-content">
              <p>–°–æ–∑–¥–∞–µ–º –ø—É—Å—Ç–æ–π —Å—Ç–µ–∫ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç–∫—Ä—ã–≤–∞—é—â–∏—Ö —Å–∫–æ–±–æ–∫.</p>
            </div>
          </div>
          
          <div class="step">
            <div class="step-number">2</div>
            <div class="step-content">
              <p>–ü–µ—Ä–µ–±–∏—Ä–∞–µ–º –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª –≤ —Å—Ç—Ä–æ–∫–µ:</p>
              <ul>
                <li>–ï—Å–ª–∏ —Å–∏–º–≤–æ–ª - <strong>–æ—Ç–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞</strong> (<code>(</code>, <code>{</code>, <code>[</code>), –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ –≤ —Å—Ç–µ–∫.</li>
                <li>–ï—Å–ª–∏ —Å–∏–º–≤–æ–ª - <strong>–∑–∞–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞</strong> (<code>)</code>, <code>}</code>, <code>]</code>):</li>
                <ul>
                  <li>–ï—Å–ª–∏ —Å—Ç–µ–∫ –ø—É—Å—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º <code>false</code> (–Ω–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –æ—Ç–∫—Ä—ã–≤–∞—é—â–µ–π —Å–∫–æ–±–∫–∏).</li>
                  <li>–ò–∑–≤–ª–µ–∫–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é –æ—Ç–∫—Ä—ã–≤–∞—é—â—É—é —Å–∫–æ–±–∫—É –∏–∑ —Å—Ç–µ–∫–∞.</li>
                  <li>–ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–∏ –∏–∑–≤–ª–µ—á–µ–Ω–Ω–∞—è –æ—Ç–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞ —Ç–µ–∫—É—â–µ–π –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–π. –ï—Å–ª–∏ –Ω–µ—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º <code>false</code>.</li>
                </ul>
                <li>–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã (–Ω–µ —Å–∫–æ–±–∫–∏) –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º.</li>
              </ul>
            </div>
          </div>
          
          <div class="step">
            <div class="step-number">3</div>
            <div class="step-content">
              <p>–ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ–π —Å—Ç—Ä–æ–∫–∏:</p>
              <ul>
                <li>–ï—Å–ª–∏ —Å—Ç–µ–∫ –ø—É—Å—Ç (–≤—Å–µ –æ—Ç–∫—Ä—ã–≤–∞—é—â–∏–µ —Å–∫–æ–±–∫–∏ –±—ã–ª–∏ –∑–∞–∫—Ä—ã—Ç—ã), –≤–æ–∑–≤—Ä–∞—â–∞–µ–º <code>true</code>.</li>
                <li>–ï—Å–ª–∏ –≤ —Å—Ç–µ–∫–µ –æ—Å—Ç–∞–ª–∏—Å—å —Å–∫–æ–±–∫–∏, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º <code>false</code> (–µ—Å—Ç—å –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã–µ —Å–∫–æ–±–∫–∏).</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      
      <div class="visualization-container">
        <h2>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è</h2>
        
        <div class="input-controls">
          <input 
            v-model="inputString" 
            placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É —Å–æ —Å–∫–æ–±–∫–∞–º–∏" 
            class="input-field"
            @input="resetAnimation"
          />
          <button @click="runAnimation" class="run-button" :disabled="isAnimating">
            {{ isAnimating ? '–ê–Ω–∏–º–∞—Ü–∏—è...' : '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å' }}
          </button>
        </div>
        
        <div class="visualization">
          <div class="input-string-container">
            <div class="string-chars">
              <div 
                v-for="(char, index) in inputString" 
                :key="index" 
                class="char" 
                :class="{ 
                  'current-char': currentIndex === index,
                  'bracket-open': isBracketOpen(char),
                  'bracket-close': isBracketClose(char)
                }"
              >{{ char }}</div>
            </div>
            <div class="pointer" :style="{ left: pointerPosition + 'px' }">‚Üë</div>
          </div>
          
          <div class="stack-container">
            <div class="stack-label">–°—Ç–µ–∫:</div>
            <div class="stack">
              <div 
                v-for="(item, index) in stackItems" 
                :key="index" 
                class="stack-item"
                :class="{ 
                  'pop-animation': index === stackItems.length - 1 && isPoppingItem,
                  'push-animation': index === stackItems.length - 1 && isPushingItem
                }"
              >{{ item }}</div>
              <div class="stack-bottom" v-if="stackItems.length === 0">–ü—É—Å—Ç–æ</div>
            </div>
          </div>
          
          <div class="status-container" v-if="animationComplete">
            <div class="status" :class="{ 'status-valid': isValid, 'status-invalid': !isValid }">
              <div class="status-icon">{{ isValid ? '‚úì' : '‚úó' }}</div>
              <div class="status-message">{{ statusMessage }}</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="implementation-container">
        <h2>–†–µ–∞–ª–∏–∑–∞—Ü–∏—è</h2>
        <div class="code-container">
          <pre><code>function checkBrackets(str) {
    const stack = [];
    const brackets = {
      ')': '(',
      '}': '{',
      ']': '['
    };
  
    for (let i = 0; i &gt; str.length; i++) {
      const char = str[i];
      
      // –ï—Å–ª–∏ —Å–∏–º–≤–æ–ª - –æ—Ç–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞, –¥–æ–±–∞–≤–ª—è–µ–º –≤ —Å—Ç–µ–∫
      if (char === '(' || char === '{' || char === '[') {
        stack.push(char);
      } 
      // –ï—Å–ª–∏ —Å–∏–º–≤–æ–ª - –∑–∞–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞
      else if (char === ')' || char === '}' || char === ']') {
        // –ï—Å–ª–∏ —Å—Ç–µ–∫ –ø—É—Å—Ç, –Ω–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –æ—Ç–∫—Ä—ã–≤–∞—é—â–µ–π —Å–∫–æ–±–∫–∏
        if (stack.length === 0) {
          return false;
        }
        
        // –ò–∑–≤–ª–µ–∫–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é –æ—Ç–∫—Ä—ã–≤–∞—é—â—É—é —Å–∫–æ–±–∫—É
        const lastOpenBracket = stack.pop();
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ç–∫—Ä—ã–≤–∞—é—â–µ–π –∏ –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–π —Å–∫–æ–±–æ–∫
        if (brackets[char] !== lastOpenBracket) {
          return false;
        }
      }
      // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
    }
    
    // –ï—Å–ª–∏ —Å—Ç–µ–∫ –ø—É—Å—Ç, –≤—Å–µ —Å–∫–æ–±–∫–∏ –∑–∞–∫—Ä—ã—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
    return stack.length === 0;
  }</code></pre>
        </div>
      </div>
      
      <div class="time-complexity">
        <h2>–ê–Ω–∞–ª–∏–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</h2>
        <div class="complexity-container">
          <div class="complexity-item">
            <div class="complexity-title">–í—Ä–µ–º–µ–Ω–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å:</div>
            <div class="complexity-value">O(n)</div>
            <div class="complexity-explanation">–ì–¥–µ n - –¥–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏. –ú—ã –ø–µ—Ä–µ–±–∏—Ä–∞–µ–º –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª —Å—Ç—Ä–æ–∫–∏ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.</div>
          </div>
          
          <div class="complexity-item">
            <div class="complexity-title">–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å:</div>
            <div class="complexity-value">O(n)</div>
            <div class="complexity-explanation">–í —Ö—É–¥—à–µ–º —Å–ª—É—á–∞–µ (–∫–æ–≥–¥–∞ –≤—Å–µ —Å–∏–º–≤–æ–ª—ã - –æ—Ç–∫—Ä—ã–≤–∞—é—â–∏–µ —Å–∫–æ–±–∫–∏) —Ä–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–≤–µ–Ω –¥–ª–∏–Ω–µ —Å—Ç—Ä–æ–∫–∏.</div>
          </div>
        </div>
      </div>
      
      <div class="pitfalls-container">
        <h2>–ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∏ –≤–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã</h2>
        <div class="pitfalls">
          <div class="pitfall" v-for="(pitfall, index) in pitfalls" :key="index">
            <div class="pitfall-icon">‚ö†Ô∏è</div>
            <div class="pitfall-content">
              <div class="pitfall-title">{{ pitfall.title }}</div>
              <div class="pitfall-explanation">{{ pitfall.explanation }}</div>
              <div class="pitfall-example" v-if="pitfall.example">
                <strong>–ü—Ä–∏–º–µ—Ä:</strong> <code>{{ pitfall.example }}</code>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="variations-container">
        <h2>–í–∞—Ä–∏–∞—Ü–∏–∏ –∑–∞–¥–∞—á–∏</h2>
        <div class="variations">
          <div class="variation" v-for="(variation, index) in variations" :key="index">
            <div class="variation-icon">üîÑ</div>
            <div class="variation-content">
              <div class="variation-title">{{ variation.title }}</div>
              <div class="variation-explanation">{{ variation.explanation }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </template>
  
  <script setup>
  import { ref, computed} from 'vue';
  
  // –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏
  const examples = [
    { input: "{Hi(good day)!}", output: "true", explanation: "–í—Å–µ —Å–∫–æ–±–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–∫—Ä—ã—Ç—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ" },
    { input: "{nice[day}", output: "false", explanation: "–ù–µ—Ç –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–π —Å–∫–æ–±–∫–∏ –¥–ª—è [" },
    { input: "(delicious[food])", output: "true", explanation: "–í–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–∫–æ–±–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–∫—Ä—ã—Ç—ã" },
    { input: "([)]", output: "false", explanation: "–ù–µ–≤–µ—Ä–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–∫–æ–±–æ–∫" },
    { input: "Hello World!", output: "true", explanation: "–ù–µ—Ç —Å–∫–æ–±–æ–∫ - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º true" }
  ];
  
  // –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏
  const pitfalls = [
    { 
      title: "–ü—É—Å—Ç–æ–π —Å—Ç–µ–∫ –ø—Ä–∏ –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–π —Å–∫–æ–±–∫–µ", 
      explanation: "–ï—Å–ª–∏ –≤—Å—Ç—Ä–µ—á–∞–µ–º –∑–∞–∫—Ä—ã–≤–∞—é—â—É—é —Å–∫–æ–±–∫—É, –∞ —Å—Ç–µ–∫ –ø—É—Å—Ç, –∑–Ω–∞—á–∏—Ç –Ω–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –æ—Ç–∫—Ä—ã–≤–∞—é—â–µ–π —Å–∫–æ–±–∫–∏ - —Å—Ä–∞–∑—É –≤–æ–∑–≤—Ä–∞—â–∞–µ–º false.",
      example: "}text{" 
    },
    { 
      title: "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–∫–æ–±–æ–∫", 
      explanation: "–°–∫–æ–±–∫–∏ –¥–æ–ª–∂–Ω—ã –∑–∞–∫—Ä—ã–≤–∞—Ç—å—Å—è –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –∏—Ö –æ—Ç–∫—Ä—ã—Ç–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã—Ä–∞–∂–µ–Ω–∏–µ ([)] –Ω–µ–≤–µ—Ä–Ω–æ, —Ö–æ—Ç—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∫–æ–±–æ–∫ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–æ.",
      example: "([)]" 
    },
    { 
      title: "–ù–µ–ø—É—Å—Ç–æ–π —Å—Ç–µ–∫ –≤ –∫–æ–Ω—Ü–µ", 
      explanation: "–ï—Å–ª–∏ –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ–π —Å—Ç—Ä–æ–∫–∏ –≤ —Å—Ç–µ–∫–µ –æ—Å—Ç–∞–ª–∏—Å—å –æ—Ç–∫—Ä—ã–≤–∞—é—â–∏–µ —Å–∫–æ–±–∫–∏, –∑–Ω–∞—á–∏—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∫–æ–±–∫–∏ –Ω–µ –±—ã–ª–∏ –∑–∞–∫—Ä—ã—Ç—ã - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º false.",
      example: "({text" 
    },
    { 
      title: "–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ-—Å–∫–æ–±–æ—á–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤", 
      explanation: "–í –∑–∞–¥–∞—á–µ –Ω–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç —Ç–æ–ª—å–∫–æ —Å–∫–æ–±–∫–∏. –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –Ω—É–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å.",
      example: "—Ç–µ–∫—Å—Ç(–∏[—Å–∏–º–≤–æ–ª—ã]){123}" 
    }
  ];
  
  // –í–∞—Ä–∏–∞—Ü–∏–∏ –∑–∞–¥–∞—á–∏
  const variations = [
    { 
      title: "–ü–æ–¥—Å—á—ë—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –≥–ª—É–±–∏–Ω—ã –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏", 
      explanation: "–ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è: –Ω–∞–π—Ç–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –≥–ª—É–±–∏–Ω—É –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ —Å–∫–æ–±–æ–∫ –≤ –≤–∞–ª–∏–¥–Ω–æ–º –≤—ã—Ä–∞–∂–µ–Ω–∏–∏." 
    },
    { 
      title: "–ü–æ–∏—Å–∫ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π", 
      explanation: "–ù–∞–π—Ç–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Å—Ç–∞–≤–æ–∫ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–π —Å–∫–æ–±–æ–∫, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å —Å—Ç—Ä–æ–∫—É –≤–∞–ª–∏–¥–Ω–æ–π." 
    },
    { 
      title: "–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ —Å–∫–æ–±–æ–∫", 
      explanation: "–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª —Å –¥—Ä—É–≥–∏–º–∏ —Ç–∏–ø–∞–º–∏ —Å–∫–æ–±–æ–∫ –∏–ª–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤." 
    },
    { 
      title: "–ù–∞—Ö–æ–∂–¥–µ–Ω–∏–µ —Å–∞–º–æ–≥–æ –¥–ª–∏–Ω–Ω–æ–≥–æ –≤–∞–ª–∏–¥–Ω–æ–≥–æ –ø–æ–¥–≤—ã—Ä–∞–∂–µ–Ω–∏—è", 
      explanation: "–ù–∞–π—Ç–∏ –¥–ª–∏–Ω—É —Å–∞–º–æ–π –¥–ª–∏–Ω–Ω–æ–π –ø–æ–¥—Å—Ç—Ä–æ–∫–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é —Å–∫–æ–±–æ–∫." 
    },
  ];
  
  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
  const inputString = ref("{Hi(good day)!}");
  const stackItems = ref([]);
  const currentIndex = ref(-1);
  const isAnimating = ref(false);
  const isPoppingItem = ref(false);
  const isPushingItem = ref(false);
  const animationComplete = ref(false);
  const isValid = ref(false);
  const statusMessage = ref('');
  
  // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ —É–∫–∞–∑–∞—Ç–µ–ª—è
  const pointerPosition = computed(() => {
    return currentIndex.value * 20 + 10; // 20px - —à–∏—Ä–∏–Ω–∞ —Å–∏–º–≤–æ–ª–∞, 10px - –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ
  });
  
  // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–∞ —Å–∫–æ–±–∫–∏
  function isBracketOpen(char) {
    return char === '(' || char === '{' || char === '[';
  }
  
  function isBracketClose(char) {
    return char === ')' || char === '}' || char === ']';
  }
  
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏ —Å–∫–æ–±–æ–∫ –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö
  function highlightBrackets(text) {
    return text.replace(/[(){}[\]]/g, '<span class="bracket-highlight">$&</span>');
  }
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å–∫–æ–±–æ–∫
  function bracketsMatch(open, close) {
    return (open === '(' && close === ')') || 
           (open === '{' && close === '}') || 
           (open === '[' && close === ']');
  }
  
  // –°–±—Ä–æ—Å –∞–Ω–∏–º–∞—Ü–∏–∏
  function resetAnimation() {
    stackItems.value = [];
    currentIndex.value = -1;
    isAnimating.value = false;
    isPoppingItem.value = false;
    isPushingItem.value = false;
    animationComplete.value = false;
  }
  
  // –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏
  async function runAnimation() {
    resetAnimation();
    isAnimating.value = true;
    
    const str = inputString.value;
    let valid = true;
    let failReason = '';
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ–±–æ—Ä–∞ —Å–∏–º–≤–æ–ª–æ–≤
    for (let i = 0; i < str.length; i++) {
      currentIndex.value = i;
      const char = str[i];
      
      await sleep(800); // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏
      
      if (isBracketOpen(char)) {
        isPushingItem.value = true;
        await sleep(400);
        stackItems.value.push(char);
        isPushingItem.value = false;
      } 
      else if (isBracketClose(char)) {
        if (stackItems.value.length === 0) {
          valid = false;
          failReason = `–ó–∞–∫—Ä—ã–≤–∞—é—â–∞—è —Å–∫–æ–±–∫–∞ ${char} –Ω–µ –∏–º–µ–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –æ—Ç–∫—Ä—ã–≤–∞—é—â–µ–π —Å–∫–æ–±–∫–∏`;
          break;
        }
        
        isPoppingItem.value = true;
        await sleep(400);
        const lastOpenBracket = stackItems.value.pop();
        isPoppingItem.value = false;
        
        if (!bracketsMatch(lastOpenBracket, char)) {
          valid = false;
          failReason = `–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–∫–æ–±–æ–∫: ${lastOpenBracket} –∏ ${char}`;
          break;
        }
      }
      // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –Ω–µ-—Å–∫–æ–±–∫–∏
    }
    
    await sleep(500);
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —Å–∫–æ–±–æ–∫ –≤ —Å—Ç–µ–∫–µ
    if (valid && stackItems.value.length > 0) {
      valid = false;
      failReason = '–û—Å—Ç–∞–ª–∏—Å—å –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã–µ —Å–∫–æ–±–∫–∏: ' + stackItems.value.join(', ');
    }
    
    isValid.value = valid;
    statusMessage.value = valid 
      ? '–í—Å–µ —Å–∫–æ–±–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–∫—Ä—ã—Ç—ã!'
      : failReason;
    animationComplete.value = true;
    isAnimating.value = false;
  }
  
  // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–¥–µ—Ä–∂–∫–∏
  function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }
  </script>
  
  <style scoped>
  .brackets-validator {
    font-family: Arial, sans-serif;
    max-width: 900px;
    margin: 0 auto;
    padding: 20px;
    color: #333;
  }
  
  h1 {
    text-align: center;
    color: #2c3e50;
    margin-bottom: 30px;
  }
  
  h2 {
    color: #2c3e50;
    border-bottom: 2px solid #3498db;
    padding-bottom: 10px;
    margin-top: 40px;
    margin-bottom: 20px;
  }
  
  h3 {
    color: #2c3e50;
    margin-top: 20px;
    margin-bottom: 15px;
  }
  
  .problem-statement {
    background-color: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    margin-bottom: 20px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }
  
  .problem-statement p {
    line-height: 1.6;
    margin: 0;
  }
  
  code {
    background-color: #f1f1f1;
    padding: 2px 5px;
    border-radius: 3px;
    font-family: 'Courier New', monospace;
  }
  
  .examples {
    margin-bottom: 30px;
  }
  
  .example {
    background-color: #f8f9fa;
    padding: 15px;
    margin-bottom: 15px;
    border-radius: 8px;
    border-left: 4px solid #3498db;
  }
  
  .example-input {
    font-family: 'Courier New', monospace;
    margin-bottom: 8px;
  }
  
  .example-output {
    font-weight: bold;
    color: #2c3e50;
    margin-bottom: 8px;
  }
  
  .example-explanation {
    font-size: 0.9rem;
    color: #666;
  }
  
  .bracket-highlight {
    color: #e74c3c;
    font-weight: bold;
  }
  
  .algorithm-steps {
    background-color: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    margin-top: 20px;
  }
  
  .step {
    display: flex;
    margin-bottom: 20px;
  }
  
  .step-number {
    width: 30px;
    height: 30px;
    background-color: #3498db;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    margin-right: 15px;
    flex-shrink: 0;
  }
  
  .step-content {
    flex: 1;
  }
  
  .step-content p {
    margin-top: 0;
    margin-bottom: 10px;
  }
  
  .step-content ul {
    padding-left: 20px;
  }
  
  .step-content li {
    margin-bottom: 8px;
  }
  
  .visualization-container {
    margin-top: 40px;
    margin-bottom: 40px;
  }
  
  .input-controls {
    display: flex;
    margin-bottom: 20px;
    gap: 10px;
  }
  
  .input-field {
    flex: 1;
    padding: 10px 15px;
    font-size: 16px;
    border: 2px solid #ddd;
    border-radius: 4px;
  }
  
  .run-button {
    padding: 10px 20px;
    background-color: #3498db;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s;
  }
  
  .run-button:hover {
    background-color: #2980b9;
  }
  
  .run-button:disabled {
    background-color: #95a5a6;
    cursor: not-allowed;
  }
  
  .visualization {
    background-color: #f8f9fa;
    padding: 30px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    min-height: 300px;
  }
  
  .input-string-container {
    position: relative;
    margin-bottom: 40px;
    padding: 20px;
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  }
  
  .string-chars {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
  }
  
  .char {
    width: 20px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Courier New', monospace;
    font-size: 18px;
    border-bottom: 1px solid #ddd;
  }
  
  .current-char {
    background-color: #ffeb3b;
    border-radius: 4px;
    box-shadow: 0 0 5px rgba(0,0,0,0.2);
  }
  
  .bracket-open {
    color: #4caf50;
    font-weight: bold;
  }
  
  .bracket-close {
    color: #f44336;
    font-weight: bold;
  }
  
  .pointer {
    position: absolute;
    bottom: 0;
    font-size: 20px;
    color: #e74c3c;
    transition: left 0.5s ease;
  }
  
  .stack-container {
    display: flex;
    margin-bottom: 30px;
  }
  
  .stack-label {
    font-weight: bold;
    margin-right: 20px;
    padding-top: 10px;
  }
  
  .stack {
    display: flex;
    flex-direction: column-reverse;
    min-height: 100px;
    min-width: 60px;
    border: 2px solid #3498db;
    border-radius: 4px;
    overflow: hidden;
    position: relative;
  }
  
  .stack-item {
    padding: 10px;
    background-color: #d1ecf1;
    border-bottom: 1px solid #bee5eb;
    text-align: center;
    font-family: 'Courier New', monospace;
    font-weight: bold;
  }
  
  .push-animation {
    animation: pushItem 0.5s ease;
  }
  
  .pop-animation {
    animation: popItem 0.5s ease;
  }
  
  @keyframes pushItem {
    from {
      transform: translateY(-30px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
  
  @keyframes popItem {
    from {
      transform: translateY(0);
      opacity: 1;
    }
    to {
      transform: translateY(30px);
      opacity: 0;
    }
  }
  
  .stack-bottom {
    padding: 10px;
    color: #6c757d;
    text-align: center;
    font-style: italic;
  }
  
  .status-container {
    margin-top: 20px;
    animation: fadeIn 0.5s ease;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  .status {
    padding: 15px;
    border-radius: 8px;
    display: flex;
    align-items: center;
  }
  
  .status-valid {
    background-color: #d4edda;
    border-left: 4px solid #28a745;
  }
  
  .status-invalid {
    background-color: #f8d7da;
    border-left: 4px solid #dc3545;
  }
  
  .status-icon {
    font-size: 24px;
    margin-right: 15px;
  }
  
  .status-valid .status-icon {
    color: #28a745;
  }
  
  .status-invalid .status-icon {
    color: #dc3545;
  }
  
  .status-message {
    font-weight: bold;
  }
  
  .code-container {
    background-color: #2d2d2d;
    padding: 20px;
    border-radius: 8px;
    overflow-x: auto;
  }
  
  pre {
    margin: 0;
    padding: 0;
  }
  
  pre code {
    font-family: 'Courier New', monospace;
    color: #f8f8f2;
    background-color: transparent;
    padding: 0;
  }
  
  .complexity-container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin-top: 20px;
  }
  
  .complexity-item {
    flex: 1;
    min-width: 300px;
    background-color: #f8f9fa;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  }
  
  .complexity-title {
    font-weight: bold;
    margin-bottom: 10px;
    color: #2c3e50;
  }
  
  .complexity-value {
    font-size: 24px;
    color: #e74c3c;
    margin-bottom: 10px;
    font-family: 'Courier New', monospace;
  }
  
  .complexity-explanation {
    color: #666;
  }
  
  .pitfalls {
    margin-top: 20px;
  }
  
  .pitfall {
    display: flex;
    margin-bottom: 20px;
    background-color: #fff8e1;
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #ffc107;
  }
  
  .pitfall-icon {
    margin-right: 15px;
    font-size: 24px;
  }
  
  .pitfall-content {
    flex: 1;
  }
  
  .pitfall-title {
    font-weight: bold;
    margin-bottom: 8px;
    color: #2c3e50;
  }
  
  .pitfall-explanation {
    margin-bottom: 8px;
  }
  
  .pitfall-example {
    font-size: 0.9rem;
    background-color: rgba(255, 255, 255, 0.5);
    padding: 8px;
    border-radius: 4px;
  }
  
  .variations {
    margin-top: 20px;
  }
  
  .variation {
    display: flex;
    margin-bottom: 20px;
    background-color: #e8f4fd;
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #2196f3;
  }
  
  .variation-icon {
    margin-right: 15px;
    font-size: 24px;
  }
  
  .variation-content {
    flex: 1;
  }
  
  .variation-title {
    font-weight: bold;
    margin-bottom: 8px;
    color: #2c3e50;
  }
  
  /* Responsive design */
  @media (max-width: 768px) {
    .complexity-container {
      flex-direction: column;
    }
    
    .input-controls {
      flex-direction: column;
    }
    
    .input-field, .run-button {
      width: 100%;
    }
    
    .stack-container {
      flex-direction: column;
    }
    
    .stack-label {
      margin-bottom: 10px;
    }
    
    .stack {
      width: 100%;
    }
  }
  </style>