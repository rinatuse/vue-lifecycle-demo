<template>
    <div class="debounce-explorer">
      <h1 class="title">–§—É–Ω–∫—Ü–∏—è Debounce: –¥–µ—Ç–∞–ª—å–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ</h1>
      
      <div class="introduction">
        <p>
          –§—É–Ω–∫—Ü–∏—è <code>debounce</code> ‚Äî —ç—Ç–æ –≤–∞–∂–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤ JavaScript, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç 
          –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —á–∞—Å—Ç–æ—Ç—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π. –û—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç 
          –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –æ—á–µ–Ω—å —á–∞—Å—Ç–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–∫—Ä–æ–ª–ª, —Ä–µ—Å–∞–π–∑).
        </p>
      </div>
      
      <div class="sections-navigation">
        <button 
          v-for="(section, index) in sections" 
          :key="section.id"
          :class="{ active: activeSection === index }"
          @click="activeSection = index"
        >
          {{ section.title }}
        </button>
      </div>
      
      <!-- –†–∞–∑–¥–µ–ª —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º -->
      <div v-if="activeSection === 0" class="section definition-section">
        <h2>–ß—Ç–æ —Ç–∞–∫–æ–µ Debounce</h2>
        
        <div class="definition-block">
          <p>
            <strong>Debounce</strong> ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è-–æ–±—ë—Ä—Ç–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç –≤—ã–∑–æ–≤ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ —Ç–µ—Ö –ø–æ—Ä, 
            –ø–æ–∫–∞ –Ω–µ –ø—Ä–æ–π–¥—ë—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ä–µ–º–µ–Ω–∏ —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã–∑–æ–≤–∞.
          </p>
          
          <div class="key-points">
            <div class="key-point">
              <div class="icon">üîÑ</div>
              <div class="text">
                <strong>–û—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ</strong> —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –Ω–∞—Å—Ç—É–ø–∏—Ç –ø–∞—É–∑–∞ –≤ –≤—ã–∑–æ–≤–∞—Ö
              </div>
            </div>
            
            <div class="key-point">
              <div class="icon">‚è±Ô∏è</div>
              <div class="text">
                <strong>–°–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Ç–∞–π–º–µ—Ä</strong> –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–æ–≤–æ–º –≤—ã–∑–æ–≤–µ
              </div>
            </div>
            
            <div class="key-point">
              <div class="icon">‚úÖ</div>
              <div class="text">
                <strong>–í—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑</strong> –ø–æ—Å–ª–µ —É–∫–∞–∑–∞–Ω–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è
              </div>
            </div>
          </div>
        </div>
        
        <div class="real-world-example">
          <h3>–ê–Ω–∞–ª–æ–≥–∏—è –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏</h3>
          <p>
            –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã –≤ –ª–∏—Ñ—Ç–µ, –∏ —Ö–æ—Ç–∏—Ç–µ –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è –¥–≤–µ—Ä–µ–π. –ù–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑, 
            –∫–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ –∑–∞—Ö–æ–¥–∏—Ç –≤ –ª–∏—Ñ—Ç, –¥–≤–µ—Ä–∏ –æ—Å—Ç–∞—é—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º–∏. –¢–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø—Ä–æ–π–¥—ë—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ 
            –≤—Ä–µ–º—è –±–µ–∑ –Ω–æ–≤—ã—Ö –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤, –¥–≤–µ—Ä–∏ –Ω–∞–∫–æ–Ω–µ—Ü –∑–∞–∫—Ä–æ—é—Ç—Å—è.
          </p>
          <p>
            –≠—Ç–æ –∏ –µ—Å—Ç—å <code>debounce</code>: —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –ø–æ–∫–∞ –Ω–µ –ø—Ä–æ–π–¥—ë—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π 
            –ø–µ—Ä–∏–æ–¥ –≤—Ä–µ–º–µ–Ω–∏ –±–µ–∑ –Ω–æ–≤—ã—Ö –≤—ã–∑–æ–≤–æ–≤.
          </p>
        </div>
      </div>
      
      <!-- –†–∞–∑–¥–µ–ª —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π -->
      <div v-if="activeSection === 1" class="section implementation-section">
        <h2>–†–µ–∞–ª–∏–∑–∞—Ü–∏—è Debounce</h2>
        
        <div class="code-explanation">
          <p>–í–æ—Ç –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ <code>debounce</code>:</p>
          
          <div class="code-container">
            <pre><code class="javascript">const debounce = (cb, ms) => {
    let timeout; // –•—Ä–∞–Ω–∏—Ç ID —Ç–∞–π–º–µ—Ä–∞
    
    return function(...args) {
      clearTimeout(timeout); // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–µ—Ä –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ
      
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π —Ç–∞–π–º–µ—Ä
      timeout = setTimeout(() => {
        cb.apply(this, args); // –í—ã–∑—ã–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏
      }, ms);
    };
  };</code></pre>
          </div>
          
          <h3>–ü–æ—à–∞–≥–æ–≤–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞:</h3>
          
          <div class="algorithm-steps">
            <div class="step">
              <div class="step-number">1</div>
              <div class="step-content">
                <p>
                  <strong>–°–æ–∑–¥–∞—ë–º –∑–∞–º—ã–∫–∞–Ω–∏–µ</strong> ‚Äî —Ñ—É–Ω–∫—Ü–∏—è debounce –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é,
                  –∫–æ—Ç–æ—Ä–∞—è –∑–∞–º—ã–∫–∞–µ—Ç –≤ —Å–µ–±–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é <code>timeout</code>.
                </p>
              </div>
            </div>
            
            <div class="step">
              <div class="step-number">2</div>
              <div class="step-content">
                <p>
                  <strong>–û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–µ—Ä</strong> ‚Äî –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏ 
                  –º—ã —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–µ—Ä —Å –ø–æ–º–æ—â—å—é <code>clearTimeout</code>.
                </p>
              </div>
            </div>
            
            <div class="step">
              <div class="step-number">3</div>
              <div class="step-content">
                <p>
                  <strong>–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π —Ç–∞–π–º–µ—Ä</strong> ‚Äî —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π —Ç–∞–π–º–µ—Ä,
                  –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑–æ–≤–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è.
                </p>
              </div>
            </div>
            
            <div class="step">
              <div class="step-number">4</div>
              <div class="step-content">
                <p>
                  <strong>–°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –∞—Ä–≥—É–º–µ–Ω—Ç—ã</strong> ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º <code>apply</code>,
                  —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç <code>this</code> –∏ –≤—Å–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é.
                </p>
              </div>
            </div>
          </div>
        </div>
        
        <div class="usage-example">
          <h3>–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:</h3>
          
          <div class="code-container">
            <pre><code class="javascript">// –°–æ–∑–¥–∞—ë–º —Ñ—É–Ω–∫—Ü–∏—é —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 500 –º—Å
  const debouncedLog = debounce((value) => console.log(value), 500);
  
  // –í—ã–ø–æ–ª–Ω—è–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—ã–∑–æ–≤–æ–≤ –ø–æ–¥—Ä—è–¥
  debouncedLog(1);     // –ù–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è
  debouncedLog(2);     // –ù–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è
  debouncedLog(777999); // –í—ã–ø–æ–ª–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ —ç—Ç–æ—Ç –≤—ã–∑–æ–≤ —á–µ—Ä–µ–∑ 500 –º—Å
  
  // –í –∫–æ–Ω—Å–æ–ª–∏ –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ: 777999</code></pre>
          </div>
        </div>
      </div>
      
      <!-- –†–∞–∑–¥–µ–ª —Å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–µ–π -->
      <div v-if="activeSection === 2" class="section demo-section">
        <h2>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è</h2>
        
        <div class="visualization">
          <div class="control-panel">
            <div class="input-group">
              <label for="debounce-delay">–ó–∞–¥–µ—Ä–∂–∫–∞ (–º—Å):</label>
              <input 
                id="debounce-delay"
                type="number" 
                v-model.number="debounceDelay" 
                min="100" 
                max="2000"
                step="100"
              >
            </div>
            
            <div class="button-group">
              <button 
                class="trigger-button"
                @click="triggerDebounce"
                :disabled="isAnimating"
              >
                –í—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é
              </button>
              
              <button 
                class="reset-button"
                @click="resetDemo"
                :disabled="isAnimating || callLog.length === 0"
              >
                –°–±—Ä–æ—Å–∏—Ç—å
              </button>
            </div>
          </div>
          
          <div class="visualization-container">
            <div class="timeline">
              <div class="axis">
                <div class="tick" v-for="i in 10" :key="i">
                  <div class="tick-line"></div>
                  <div class="tick-label">{{ i * 100 }}–º—Å</div>
                </div>
              </div>
              
              <div class="events">
                <div 
                  v-for="(call, index) in callLog" 
                  :key="index"
                  class="event"
                  :class="{ 'executed': call.executed }"
                  :style="{ left: `${call.time * 100 / maxTime}%` }"
                >
                  <div class="event-marker"></div>
                  <div class="event-label">{{ call.value }}</div>
                  <div 
                    v-if="call.timeoutId && !call.executed && !call.cancelled"
                    class="timeout-indicator"
                    :style="{ width: `${Math.min(100, (debounceDelay / 10))}px` }"
                  ></div>
                  <div v-if="call.cancelled" class="cancel-indicator">‚úï</div>
                  <div v-if="call.executed" class="execute-indicator">‚úì</div>
                </div>
                
                <div 
                  v-if="activeTimeout"
                  class="active-timeout"
                  :style="{ 
                    left: `${lastCallTime * 100 / maxTime}%`, 
                    width: `${Math.min(100, ((debounceDelay / 10) * (1 - timeoutProgress)))}px` 
                  }"
                ></div>
              </div>
            </div>
            
            <div class="execution-log">
              <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</h3>
              <div class="log-container">
                <div 
                  v-for="(result, index) in executionResults" 
                  :key="index"
                  class="log-item"
                >
                  console.log({{ result.value }}) –≤ {{ result.time }}–º—Å
                </div>
                <div v-if="executionResults.length === 0" class="empty-log">
                  –ü–æ–∫–∞ –Ω–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="explanation-text">
          <p>
            <strong>–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ç–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è:</strong>
          </p>
          <ul>
            <li>–ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –≤—ã –Ω–∞–∂–∏–º–∞–µ—Ç–µ –∫–Ω–æ–ø–∫—É "–í—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é", –º—ã –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –≤—ã–∑–æ–≤ –Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω—É—é —à–∫–∞–ª—É</li>
            <li>–°–∏–Ω—è—è –ø–æ–ª–æ—Å–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ–∫—É—â–∏–π –∞–∫—Ç–∏–≤–Ω—ã–π —Ç–∞–π–º–µ—Ä debounce</li>
            <li>–ö–æ–≥–¥–∞ –º—ã –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Å–Ω–æ–≤–∞ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞, –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–µ—Ä –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è (–∫—Ä–∞—Å–Ω—ã–π –∫—Ä–µ—Å—Ç–∏–∫)</li>
            <li>–¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤—ã–∑–æ–≤ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è (–∑–µ–ª–µ–Ω–∞—è –≥–∞–ª–æ—á–∫–∞) –ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è</li>
          </ul>
        </div>
      </div>
      
      <!-- –†–∞–∑–¥–µ–ª —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º -->
      <div v-if="activeSection === 3" class="section applications-section">
        <h2>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö</h2>
        
        <div class="applications-grid">
          <div class="application-card">
            <div class="card-header">
              <div class="card-icon">üîç</div>
              <h3>–ü–æ–∏—Å–∫ –ø–æ –º–µ—Ä–µ –≤–≤–æ–¥–∞</h3>
            </div>
            <div class="card-content">
              <p>
                –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Å—Ç–∞–ª –ø–µ—á–∞—Ç–∞—Ç—å
                –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥, –∞ –Ω–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–∞–∂–∞—Ç–∏–∏ –∫–ª–∞–≤–∏—à–∏.
              </p>
              <div class="code-snippet">
                <pre><code class="javascript">const searchInput = document.getElementById('search');
  const debouncedSearch = debounce((value) => {
    // –ó–∞–ø—Ä–æ—Å –∫ API —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–∞—É–∑—ã
    fetch(`/api/search?q=${value}`);
  }, 300);
  
  searchInput.addEventListener('input', (e) => {
    debouncedSearch(e.target.value);
  });</code></pre>
              </div>
            </div>
          </div>
          
          <div class="application-card">
            <div class="card-header">
              <div class="card-icon">üì±</div>
              <h3>–û–±—Ä–∞–±–æ—Ç–∫–∞ resize —Å–æ–±—ã—Ç–∏–π</h3>
            </div>
            <div class="card-content">
              <p>
                –ü–µ—Ä–µ—Ä–∞—Å—á—ë—Ç –º–∞–∫–µ—Ç–∞ –∏–ª–∏ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ,
                –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–∫–æ–Ω—á–∏–ª –∏–∑–º–µ–Ω—è—Ç—å —Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞.
              </p>
              <div class="code-snippet">
                <pre><code class="javascript">const handleResize = debounce(() => {
    // –¢—è–∂—ë–ª–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –ø–µ—Ä–µ—Ä–∞—Å—á—ë—Ç–∞ –º–∞–∫–µ—Ç–∞
    recalculateLayout();
  }, 200);
  
  window.addEventListener('resize', handleResize);</code></pre>
              </div>
            </div>
          </div>
          
          <div class="application-card">
            <div class="card-header">
              <div class="card-icon">üìú</div>
              <h3>–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∫—Ä–æ–ª–ª–∞</h3>
            </div>
            <div class="card-content">
              <p>
                –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–µ–∫—Ä–∞—Ç–∏–ª –ø—Ä–æ–∫—Ä—É—Ç–∫—É,
                –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ "–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞".
              </p>
              <div class="code-snippet">
                <pre><code class="javascript">const handleScroll = debounce(() => {
    const { scrollTop, scrollHeight, clientHeight } = document.documentElement;
    
    // –ï—Å–ª–∏ –ø—Ä–æ–∫—Ä—É—Ç–∏–ª–∏ –¥–æ –∫–æ–Ω—Ü–∞ - –∑–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë –∫–æ–Ω—Ç–µ–Ω—Ç
    if (scrollTop + clientHeight >= scrollHeight - 10) {
      loadMoreContent();
    }
  }, 150);
  
  window.addEventListener('scroll', handleScroll);</code></pre>
              </div>
            </div>
          </div>
          
          <div class="application-card">
            <div class="card-header">
              <div class="card-icon">üíæ</div>
              <h3>–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º</h3>
            </div>
            <div class="card-content">
              <p>
                –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
                –ø–µ—Ä–µ—Å—Ç–∞–ª –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è.
              </p>
              <div class="code-snippet">
                <pre><code class="javascript">const editor = document.getElementById('editor');
  const debouncedSave = debounce((content) => {
    localStorage.setItem('draft', content);
    showSavedIndicator();
  }, 500);
  
  editor.addEventListener('input', (e) => {
    debouncedSave(e.target.value);
  });</code></pre>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- –†–∞–∑–¥–µ–ª —Å –ø–æ–¥–≤–æ–¥–Ω—ã–º–∏ –∫–∞–º–Ω—è–º–∏ -->
      <div v-if="activeSection === 4" class="section pitfalls-section">
        <h2>–ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏</h2>
        
        <div class="pitfalls-list">
          <div class="pitfall">
            <h3><span class="pitfall-icon">‚ö†Ô∏è</span> –ü–æ—Ç–µ—Ä—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ this</h3>
            <div class="pitfall-content">
              <p>–ï—Å–ª–∏ debounce –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å –º–µ—Ç–æ–¥–∞–º–∏ –æ–±—ä–µ–∫—Ç–∞, –≤–∞–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç <code>this</code>.</p>
              
              <div class="wrong-right">
                <div class="wrong">
                  <h4>‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ</h4>
                  <pre><code class="javascript">class SearchComponent {
    constructor() {
      this.results = [];
      // –ü–æ—Ç–µ—Ä—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ this
      this.debouncedSearch = debounce(this.search, 300);
    }
    
    search(query) {
      // this –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä SearchComponent
      // this.results –±—É–¥–µ—Ç undefined
      this.results = performSearch(query);
    }
  }</code></pre>
                </div>
                
                <div class="right">
                  <h4>‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ</h4>
                  <pre><code class="javascript">class SearchComponent {
    constructor() {
      this.results = [];
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç this
      this.debouncedSearch = debounce(
        (query) => this.search(query), 300
      );
      // –∏–ª–∏
      this.debouncedSearch = debounce(
        this.search.bind(this), 300
      );
    }
    
    search(query) {
      this.results = performSearch(query);
    }
  }</code></pre>
                </div>
              </div>
            </div>
          </div>
          
          <div class="pitfall">
            <h3><span class="pitfall-icon">‚ö†Ô∏è</span> –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è</h3>
            <div class="pitfall-content">
              <p>
                –§—É–Ω–∫—Ü–∏—è, –æ–±—ë—Ä–Ω—É—Ç–∞—è –≤ debounce, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –ø–æ—ç—Ç–æ–º—É –Ω–µ–ª—å–∑—è –Ω–∞–ø—Ä—è–º—É—é 
                –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ—ë –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.
              </p>
              
              <div class="wrong-right">
                <div class="wrong">
                  <h4>‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ</h4>
                  <pre><code class="javascript">const calculate = (a, b) => a + b;
  const debouncedCalc = debounce(calculate, 300);
  
  // ‚ùå –í—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç undefined
  const result = debouncedCalc(5, 10);</code></pre>
                </div>
                
                <div class="right">
                  <h4>‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ</h4>
                  <pre><code class="javascript">const calculate = (a, b) => a + b;
  const debouncedCalc = debounce((a, b) => {
    const result = calculate(a, b);
    console.log(result); // –ò–ª–∏ –¥—Ä—É–≥–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
  }, 300);
  
  debouncedCalc(5, 10); // –í—ã–≤–µ–¥–µ—Ç 15 —á–µ—Ä–µ–∑ 300 –º—Å</code></pre>
                </div>
              </div>
            </div>
          </div>
          
          <div class="pitfall">
            <h3><span class="pitfall-icon">‚ö†Ô∏è</span> –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ immediate –≤—ã–∑–æ–≤–∞</h3>
            <div class="pitfall-content">
              <p>
                –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è debounce –≤—Å–µ–≥–¥–∞ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, —á—Ç–æ –Ω–µ –≤—Å–µ–≥–¥–∞ —É–¥–æ–±–Ω–æ.
                –ò–Ω–æ–≥–¥–∞ –ø–æ–ª–µ–∑–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é –¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ.
              </p>
              
              <div class="code-container">
                <pre><code class="javascript">const debounce = (cb, ms, immediate = false) => {
    let timeout;
    
    return function(...args) {
      const callNow = immediate && !timeout;
      clearTimeout(timeout);
      
      timeout = setTimeout(() => {
        timeout = null;
        if (!immediate) cb.apply(this, args);
      }, ms);
      
      if (callNow) cb.apply(this, args);
    };
  };</code></pre>
              </div>
            </div>
          </div>
          
          <div class="pitfall">
            <h3><span class="pitfall-icon">‚ö†Ô∏è</span> –û—Ç–º–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã–∑–æ–≤–∞</h3>
            <div class="pitfall-content">
              <p>
                –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–π –≤—ã–∑–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞),
                —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è debounce –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–∞–∫–æ–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.
              </p>
              
              <div class="code-container">
                <pre><code class="javascript">const debounce = (cb, ms) => {
    let timeout;
    
    const debouncedFn = function(...args) {
      clearTimeout(timeout);
      timeout = setTimeout(() => {
        cb.apply(this, args);
      }, ms);
    };
    
    // –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–æ–¥ –¥–ª—è –æ—Ç–º–µ–Ω—ã
    debouncedFn.cancel = function() {
      clearTimeout(timeout);
      timeout = null;
    };
    
    return debouncedFn;
  };</code></pre>
              </div>
              
              <p>
                –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
              </p>
              
              <div class="code-snippet">
                <pre><code class="javascript">const debouncedSearch = debounce(search, 300);
  
  // –í Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
  onUnmounted(() => {
    debouncedSearch.cancel(); // –û—Ç–º–µ–Ω—è–µ–º –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
  });</code></pre>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- –†–∞–∑–¥–µ–ª —Å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º Debounce –∏ Throttle -->
      <div v-if="activeSection === 5" class="section vs-throttle-section">
        <h2>Debounce vs Throttle</h2>
        
        <div class="comparison">
          <p>
            <code>Debounce</code> –∏ <code>Throttle</code> ‚Äî —ç—Ç–æ –¥–≤–µ —Å—Ö–æ–∂–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –Ω–æ —Å —Ä–∞–∑–Ω—ã–º–∏
            –ø–æ–¥—Ö–æ–¥–∞–º–∏ –∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—é —á–∞—Å—Ç–æ—Ç—ã –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏:
          </p>
          
          <div class="comparison-table">
            <div class="table-header">
              <div class="cell feature">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞</div>
              <div class="cell debounce">Debounce</div>
              <div class="cell throttle">Throttle</div>
            </div>
            
            <div class="table-row">
              <div class="cell feature">–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã</div>
              <div class="cell debounce">–û—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ –ø–∞—É–∑—ã –≤ –≤—ã–∑–æ–≤–∞—Ö</div>
              <div class="cell throttle">–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—É –≤—ã–∑–æ–≤–æ–≤ –¥–æ X —Ä–∞–∑ –≤ Y –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥</div>
            </div>
            
            <div class="table-row">
              <div class="cell feature">–ö–æ–≥–¥–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç</div>
              <div class="cell debounce">–ü–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã–∑–æ–≤–∞ + –∑–∞–¥–µ—Ä–∂–∫–∞</div>
              <div class="cell throttle">–†–µ–≥—É–ª—è—Ä–Ω–æ –≤–æ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤—ã–∑–æ–≤–æ–≤</div>
            </div>
            
            <div class="table-row">
              <div class="cell feature">–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</div>
              <div class="cell debounce">–ü–æ–∏—Å–∫ –ø–æ –º–µ—Ä–µ –≤–≤–æ–¥–∞, –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞</div>
              <div class="cell throttle">–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–∫—Ä–æ–ª–ª–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è –º—ã—à–∏, –∏–≥—Ä–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏</div>
            </div>
            
            <div class="table-row">
              <div class="cell feature">–õ—É—á—à–µ –≤—Å–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è</div>
              <div class="cell debounce">–°–∏—Ç—É–∞—Ü–∏–π, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</div>
              <div class="cell throttle">–°–∏—Ç—É–∞—Ü–∏–π, –≥–¥–µ –Ω—É–∂–Ω–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å, –Ω–æ –Ω–µ –Ω–∞ –∫–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ</div>
            </div>
          </div>
          
          <div class="comparison-visualization">
            <div class="visualization-info">
              <div class="calls">
                <div class="call-marker"></div>
                <span>–í—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–∏</span>
              </div>
              <div class="executions">
                <div class="execution-marker debounce"></div>
                <span>–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å debounce</span>
              </div>
              <div class="executions">
                <div class="execution-marker throttle"></div>
                <span>–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å throttle</span>
              </div>
            </div>
            
            <div class="visualization-timeline">
              <div class="timeline-calls">
                <div class="timeline-call" v-for="pos in [10, 20, 30, 35, 50, 55, 85, 90]" :key="pos" :style="{ left: `${pos}%` }"></div>
              </div>
              <div class="timeline-executions debounce">
                <div class="timeline-execution" style="left: 65%"></div>
              </div>
              <div class="timeline-executions throttle">
                <div class="timeline-execution" v-for="pos in [10, 40, 70]" :key="pos" :style="{ left: `${pos}%` }"></div>
              </div>
            </div>
          </div>
          
          <div class="throttle-implementation">
            <h3>–†–µ–∞–ª–∏–∑–∞—Ü–∏—è Throttle –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:</h3>
            
            <div class="code-container">
              <pre><code class="javascript">const throttle = (cb, ms) => {
    let isThrottled = false;
    let savedArgs = null;
    let savedThis = null;
    
    function wrapper(...args) {
      if (isThrottled) {
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã–∑–æ–≤–∞
        savedArgs = args;
        savedThis = this;
        return;
      }
      
      // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Å—Ä–∞–∑—É
      cb.apply(this, args);
      
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥ throttle
      isThrottled = true;
      
      // –ß–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è —Å–Ω–∏–º–∞–µ–º —Ñ–ª–∞–≥
      setTimeout(() => {
        isThrottled = false;
        
        // –ï—Å–ª–∏ –±—ã–ª–∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã, –≤—ã–ø–æ–ª–Ω—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π
        if (savedArgs) {
          wrapper.apply(savedThis, savedArgs);
          savedArgs = savedThis = null;
        }
      }, ms);
    }
    
    return wrapper;
  };</code></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
  </template>
  
  <script setup>
  import { ref, onMounted, onBeforeUnmount} from 'vue';
  
  // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ debounce –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
  const _debounce = (cb, ms) => {
    let timeout;
    
    return function(...args) {
      clearTimeout(timeout);
      timeout = setTimeout(() => {
        cb.apply(this, args);
      }, ms);
    };
  };
  
  // –°–µ–∫—Ü–∏–∏
  const sections = [
    { id: 'definition', title: '–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ' },
    { id: 'implementation', title: '–†–µ–∞–ª–∏–∑–∞—Ü–∏—è' },
    { id: 'demo', title: '–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è' },
    { id: 'applications', title: '–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ' },
    { id: 'pitfalls', title: '–ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏' },
    { id: 'vs-throttle', title: '–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Throttle' }
  ];
  
  // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
  const activeSection = ref(0);
  const debounceDelay = ref(500);
  const callLog = ref([]);
  const executionResults = ref([]);
  const isAnimating = ref(false);
  const activeTimeout = ref(null);
  const lastCallTime = ref(0);
  const timeoutProgress = ref(0);
  const maxTime = ref(1000); // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è —à–∫–∞–ª—ã –≤ –º—Å
  let animationFrameId = null;
  let startTime = 0;
  
  // –°—á–µ—Ç—á–∏–∫ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
  let callCounter = 1;
  
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–∑–æ–≤–∞ debounce –≤ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
  const triggerDebounce = () => {
    const currentTime = Date.now() - startTime;
    const callValue = callCounter++;
    
    // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –≤—ã–∑–æ–≤ –≤ –ª–æ–≥
    const newCall = { 
      value: callValue, 
      time: currentTime,
      executed: false,
      cancelled: false,
      timeoutId: callCounter
    };
    
    callLog.value.push(newCall);
    lastCallTime.value = currentTime;
    
    // –û—Ç–º–µ–Ω—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –≤—ã–∑–æ–≤—ã, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
    callLog.value.forEach(call => {
      if (!call.executed && !call.cancelled && call.timeoutId !== newCall.timeoutId) {
        call.cancelled = true;
      }
    });
    
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π —Ç–∞–π–º–µ—Ä
    isAnimating.value = true;
    activeTimeout.value = true;
    timeoutProgress.value = 0;
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
    const animate = () => {
      const now = Date.now() - startTime;
      const elapsed = now - currentTime;
      
      if (elapsed < debounceDelay.value) {
        timeoutProgress.value = elapsed / debounceDelay.value;
        animationFrameId = requestAnimationFrame(animate);
      } else {
        // –í—ã–ø–æ–ª–Ω—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ø–æ—Å–ª–µ –∑–∞–¥–µ—Ä–∂–∫–∏
        executeCall(newCall, now);
        activeTimeout.value = false;
        isAnimating.value = false;
      }
    };
    
    animationFrameId = requestAnimationFrame(animate);
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è —à–∫–∞–ª—ã
    maxTime.value = Math.max(maxTime.value, currentTime + debounceDelay.value + 200);
  };
  
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—ã–∑–æ–≤–∞
  const executeCall = (call, executeTime) => {
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –≤—ã–∑–æ–≤–∞
    call.executed = true;
    
    // –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    executionResults.value.push({
      value: call.value,
      time: executeTime
    });
  };
  
  // –°–±—Ä–æ—Å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
  const resetDemo = () => {
    callCounter = 1;
    callLog.value = [];
    executionResults.value = [];
    activeTimeout.value = false;
    timeoutProgress.value = 0;
    lastCallTime.value = 0;
    maxTime.value = 1000;
    startTime = Date.now();
    
    if (animationFrameId) {
      cancelAnimationFrame(animationFrameId);
      animationFrameId = null;
    }
  };
  
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  onMounted(() => {
    startTime = Date.now();
  });
  
  // –û—á–∏—Å—Ç–∫–∞
  onBeforeUnmount(() => {
    if (animationFrameId) {
      cancelAnimationFrame(animationFrameId);
    }
  });
  </script>
  
  <style scoped>
  .debounce-explorer {
    font-family: Arial, sans-serif;
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
    background-color: #ffffff;
    color: #000000;
  }
  
  .title {
    text-align: center;
    color: #333;
    margin-bottom: 20px;
    font-size: 2rem;
  }
  
  .introduction {
    margin-bottom: 30px;
    line-height: 1.6;
  }
  
  .sections-navigation {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 30px;
    justify-content: center;
  }
  
  .sections-navigation button {
    padding: 10px 20px;
    background-color: #f0f0f0;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s;
  }
  
  .sections-navigation button:hover {
    background-color: #e0e0e0;
  }
  
  .sections-navigation button.active {
    background-color: #3498db;
    color: white;
  }
  
  .section {
    margin-bottom: 40px;
    animation: fadeIn 0.4s ease;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  .section h2 {
    border-bottom: 2px solid #3498db;
    padding-bottom: 10px;
    margin-bottom: 20px;
    color: #2c3e50;
  }
  
  /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–µ–∫—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è */
  .definition-block {
    background-color: #f9f9f9;
    padding: 20px;
    border-left: 4px solid #3498db;
    margin-bottom: 20px;
    border-radius: 5px;
  }
  
  .key-points {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-top: 20px;
  }
  
  .key-point {
    display: flex;
    align-items: flex-start;
    gap: 15px;
  }
  
  .key-point .icon {
    font-size: 24px;
  }
  
  .real-world-example {
    background-color: #f2f9f4;
    padding: 20px;
    border-radius: 5px;
    border-left: 4px solid #2ecc71;
  }
  
  /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–µ–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ */
  .code-container {
    background-color: #2d2d2d;
    border-radius: 5px;
    padding: 15px;
    margin: 15px 0;
    overflow-x: auto;
  }
  
  .code-container pre {
    margin: 0;
  }
  
  .code-container code {
    font-family: 'Courier New', monospace;
    color: #f8f8f2;
    line-height: 1.5;
  }
  
  .algorithm-steps {
    margin: 20px 0;
  }
  
  .step {
    display: flex;
    margin-bottom: 15px;
    align-items: flex-start;
  }
  
  .step-number {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 30px;
    height: 30px;
    background-color: #3498db;
    color: white;
    border-radius: 50%;
    font-weight: bold;
    margin-right: 15px;
    flex-shrink: 0;
  }
  
  .usage-example {
    background-color: #f8f9fa;
    padding: 20px;
    border-radius: 5px;
    margin-top: 30px;
    border-left: 4px solid #f39c12;
  }
  
  /* –°—Ç–∏–ª–∏ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ */
  .visualization {
    background-color: #f8f9fa;
    padding: 20px;
    border-radius: 5px;
    margin-bottom: 20px;
  }
  
  .control-panel {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    flex-wrap: wrap;
    gap: 15px;
  }
  
  .input-group {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .input-group label {
    font-weight: bold;
  }
  
  .input-group input {
    padding: 8px;
    width: 100px;
    border: 1px solid #ddd;
    border-radius: 4px;
  }
  
  .button-group {
    display: flex;
    gap: 10px;
  }
  
  .trigger-button, .reset-button {
    padding: 10px 15px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.3s;
  }
  
  .trigger-button {
    background-color: #3498db;
    color: white;
  }
  
  .reset-button {
    background-color: #e74c3c;
    color: white;
  }
  
  .trigger-button:hover {
    background-color: #2980b9;
  }
  
  .reset-button:hover {
    background-color: #c0392b;
  }
  
  .trigger-button:disabled, .reset-button:disabled {
    background-color: #95a5a6;
    cursor: not-allowed;
  }
  
  .visualization-container {
    margin-top: 40px;
  }
  
  .timeline {
    position: relative;
    height: 150px;
    margin-bottom: 30px;
  }
  
  .axis {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 50px;
    display: flex;
  }
  
  .tick {
    flex: 1;
    position: relative;
    height: 100%;
  }
  
  .tick-line {
    position: absolute;
    top: 0;
    bottom: 30px;
    width: 1px;
    background-color: #ddd;
    left: 0;
  }
  
  .tick-label {
    position: absolute;
    bottom: 0;
    left: -20px;
    font-size: 12px;
    color: #777;
  }
  
  .events {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100px;
  }
  
  .event {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
  }
  
  .event-marker {
    width: 12px;
    height: 12px;
    background-color: #3498db;
    border-radius: 50%;
    position: absolute;
    top: 0;
    left: 0;
    transform: translate(-50%, -50%);
  }
  
  .event-label {
    position: absolute;
    top: -30px;
    left: 0;
    transform: translateX(-50%);
    font-size: 12px;
    background-color: #3498db;
    color: white;
    padding: 3px 6px;
    border-radius: 3px;
  }
  
  .timeout-indicator {
    position: absolute;
    top: 0;
    left: 0;
    height: 4px;
    background-color: #3498db;
    transform: translateX(-1px);
  }
  
  .active-timeout {
    position: absolute;
    top: 50%;
    height: 4px;
    background-color: #3498db;
    transition: width 0.1s linear;
  }
  
  .cancel-indicator {
    position: absolute;
    top: 0;
    left: 0;
    font-size: 14px;
    color: #e74c3c;
    transform: translate(-50%, -50%);
  }
  
  .execute-indicator {
    position: absolute;
    top: 0;
    left: 0;
    font-size: 14px;
    color: #2ecc71;
    transform: translate(-50%, -50%);
  }
  
  .execution-log {
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 5px;
    padding: 15px;
    margin-top: 20px;
  }
  
  .log-container {
    min-height: 100px;
    max-height: 200px;
    overflow-y: auto;
    background-color: #f9f9f9;
    padding: 10px;
    border-radius: 3px;
  }
  
  .log-item {
    padding: 5px 10px;
    border-bottom: 1px solid #eee;
    font-family: monospace;
  }
  
  .empty-log {
    color: #999;
    text-align: center;
    padding: 20px;
  }
  
  .explanation-text {
    margin-top: 30px;
  }
  
  .explanation-text ul {
    padding-left: 20px;
  }
  
  .explanation-text li {
    margin-bottom: 8px;
  }
  
  /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–µ–∫—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è */
  .applications-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }
  
  .application-card {
    background-color: #fff;
    border-radius: 5px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    overflow: hidden;
  }
  
  .card-header {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px;
    background-color: #f5f5f5;
    border-bottom: 1px solid #eee;
  }
  
  .card-icon {
    font-size: 24px;
  }
  
  .card-header h3 {
    margin: 0;
    color: #333;
  }
  
  .card-content {
    padding: 15px;
  }
  
  .code-snippet {
    background-color: #f8f9fa;
    padding: 10px;
    border-radius: 5px;
    border-left: 3px solid #3498db;
    margin-top: 10px;
    overflow-x: auto;
  }
  
  .code-snippet pre {
    margin: 0;
  }
  
  .code-snippet code {
    font-family: 'Courier New', monospace;
    color: #333;
    line-height: 1.4;
  }
  
  /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–µ–∫—Ü–∏–∏ —Å –ø–æ–¥–≤–æ–¥–Ω—ã–º–∏ –∫–∞–º–Ω—è–º–∏ */
  .pitfalls-list {
    display: flex;
    flex-direction: column;
    gap: 30px;
  }
  
  .pitfall {
    background-color: #f8f9fa;
    border-radius: 5px;
    padding: 20px;
    border-left: 4px solid #e74c3c;
  }
  
  .pitfall h3 {
    margin-top: 0;
    color: #e74c3c;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .pitfall-icon {
    font-size: 24px;
  }
  
  .wrong-right {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-top: 20px;
  }
  
  @media (max-width: 768px) {
    .wrong-right {
      grid-template-columns: 1fr;
    }
  }
  
  .wrong, .right {
    padding: 15px;
    border-radius: 5px;
  }
  
  .wrong {
    background-color: #fff5f5;
    border-left: 3px solid #e74c3c;
  }
  
  .right {
    background-color: #f0fff4;
    border-left: 3px solid #2ecc71;
  }
  
  .wrong h4, .right h4 {
    margin-top: 0;
    margin-bottom: 10px;
  }
  
  /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å throttle */
  .comparison {
    margin-top: 20px;
  }
  
  .comparison-table {
    display: grid;
    grid-template-columns: 1.5fr 1fr 1fr;
    gap: 1px;
    background-color: #ddd;
    margin: 20px 0;
    border-radius: 5px;
    overflow: hidden;
  }
  
  .cell {
    padding: 12px 15px;
    background-color: #fff;
  }
  
  .table-header .cell {
    font-weight: bold;
    background-color: #f5f5f5;
  }
  
  .cell.feature {
    font-weight: bold;
  }
  
  .cell.debounce {
    background-color: #ebf8ff;
  }
  
  .cell.throttle {
    background-color: #fff5f7;
  }
  
  .comparison-visualization {
    margin: 30px 0;
    background-color: #f8f9fa;
    padding: 20px;
    border-radius: 5px;
  }
  
  .visualization-info {
    display: flex;
    gap: 20px;
    margin-bottom: 15px;
  }
  
  .calls, .executions {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .call-marker {
    width: 10px;
    height: 10px;
    background-color: #666;
    border-radius: 50%;
  }
  
  .execution-marker {
    width: 10px;
    height: 10px;
    border-radius: 50%;
  }
  
  .execution-marker.debounce {
    background-color: #3498db;
  }
  
  .execution-marker.throttle {
    background-color: #e91e63;
  }
  
  .visualization-timeline {
    position: relative;
    height: 150px;
    background-color: #f0f0f0;
    border-radius: 5px;
    margin-top: 20px;
  }
  
  .timeline-calls {
    position: absolute;
    top: 30px;
    left: 0;
    width: 100%;
    height: 30px;
  }
  
  .timeline-call {
    position: absolute;
    width: 10px;
    height: 10px;
    background-color: #666;
    border-radius: 50%;
    transform: translate(-50%, -50%);
  }
  
  .timeline-executions {
    position: absolute;
    width: 100%;
    height: 30px;
  }
  
  .timeline-executions.debounce {
    top: 70px;
  }
  
  .timeline-executions.throttle {
    top: 110px;
  }
  
  .timeline-execution {
    position: absolute;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    transform: translate(-50%, -50%);
  }
  
  .timeline-executions.debounce .timeline-execution {
    background-color: #3498db;
  }
  
  .timeline-executions.throttle .timeline-execution {
    background-color: #e91e63;
  }
  
  .throttle-implementation {
    margin-top: 30px;
  }
  
  /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
  @media (max-width: 768px) {
    .applications-grid {
      grid-template-columns: 1fr;
    }
    
    .comparison-table {
      grid-template-columns: 1fr;
    }
    
    .table-header {
      display: none;
    }
    
    .cell {
      padding: 10px;
    }
    
    .cell.feature {
      background-color: #f5f5f5;
      border-top-left-radius: 5px;
      border-top-right-radius: 5px;
    }
    
    .cell.feature::before {
      content: attr(data-label);
      font-weight: bold;
      display: block;
      margin-bottom: 5px;
    }
  }
  </style>